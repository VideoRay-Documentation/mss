<h1>Updating Firmware</h1>

<p>For SPAMs hooked up to the comms you need to open a virtual port to use vr_refesh.</p>

<p>The following script will create virtual ports:<p>

<p class="folder">&nbsp; &nbsp; ./vr_create_virtport_all.sh</p>

<p>This will create ~/vrport1 through ~/vrport6></p>

<p>To list the port details for the AHRSD module (for example), use the following command:</p>

<p class="folder">&nbsp; &nbsp; vr_enum -c ~/vrport2</p>

<p>Example update commands for different modules:</p>

<p class="folder">&nbsp; &nbsp; vr_refresh -c ~/vrport3 -i 3 --block_size 16384 ~/firmware/attitude_sensor-0.4.3.hex</p>

<p class="folder">&nbsp; &nbsp; vr_refresh -v -i 2 ~/firmware/comms_hub-0.3.0.hex --block_size 16384</p>

<p><span class="folder">&nbsp; &nbsp; vr_refresh -v -i 5 ~/firmware/motor_controllerXXX.hex</span> (where XXX is the highest version)</p>

<p>Firmware Block Sizes:</p>

<table>
  <tr>
    <th>Thruster</th>
    <th>Default</th>
    <th>Comms Path</th>
    </tr>
  <tr>
    <td>Camera Main</td>
    <td>16384</td>
    <td>vport2</td>
    </tr>
  <tr>
    <td>Camera Auxiliary 1</td>
    <td>16384</td>
    <td>vport4</td>
    </tr>
  <tr>
    <td>LED</td>
    <td>Default</td>
    <td>Direct</td>
    </tr>
  <tr>
    <td>Comms</td>
    <td>16384</td>
    <td>Direct</td>
    </tr>
  <tr>
    <td>Power</td>
    <td>16384</td>
    <td>Direct</td>
    </tr>
  <tr>
    <td>AHRSD</td>
    <td>16384</td>
    <td>vport3</td>
    </tr>
  </table>
<p></p>